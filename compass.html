<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Compass - Infinity System</title>
    
    <!-- CDN Links -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin></script>
    
    <!-- Auth System -->
    <script src="auth-system.js"></script>
    <script src="ai-learning-system.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: 
                radial-gradient(circle at 20% 50%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 168, 204, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #000000 0%, #0a0a0f 25%, #1a1a2e 50%, #0f3460 75%, #000000 100%);
            min-height: 100vh;
            color: white;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        .infinity-text {
            color: #00d4ff;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }
        
        .glass-morphism {
            background: rgba(0, 212, 255, 0.05);
            backdrop-filter: blur(15px) saturate(150%);
            border: 1px solid rgba(0, 212, 255, 0.3);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
        }
        
        .cyber-card {
            background: rgba(0, 100, 255, 0.08);
            border: 1px solid rgba(0, 255, 255, 0.4);
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-card:hover {
            transform: translateY(-4px) scale(1.02);
            background: rgba(0, 100, 255, 0.15);
            box-shadow: 0 20px 60px rgba(0, 255, 255, 0.3);
            border: 2px solid rgba(0, 255, 255, 0.8);
        }
        
        .quantum-btn {
            background: #00d4ff;
            border: none;
            color: white;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.15s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .quantum-btn:hover {
            background: #0099cc;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.5);
        }
        
        .orbitron {
            font-family: 'Orbitron', monospace;
        }
        
        .infinity-glow {
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }
        
        .playbook-card {
            background: rgba(0, 100, 255, 0.08);
            border: 1px solid rgba(0, 255, 255, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .playbook-card:hover {
            transform: translateY(-2px) scale(1.01);
            background: rgba(0, 100, 255, 0.12);
            box-shadow: 0 15px 40px rgba(0, 255, 255, 0.2);
        }
        
        .playbook-card.selected {
            background: linear-gradient(45deg, rgba(0, 212, 255, 0.3), rgba(255, 0, 255, 0.3));
            border: 2px solid #00d4ff;
            box-shadow: 0 0 25px rgba(0, 212, 255, 0.5);
        }
        
        .filter-active {
            background: linear-gradient(45deg, rgba(0, 212, 255, 0.3), rgba(255, 0, 255, 0.3));
            border: 2px solid #00d4ff;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.4);
        }
        
        .confidence-bar {
            height: 4px;
            background: linear-gradient(90deg, #ff4444, #ffaa00, #00ff88);
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        .risk-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .risk-low { background: #00ff88; }
        .risk-medium { background: #ffaa00; }
        .risk-high { background: #ff4444; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function InvestmentCompass() {
            const [user, setUser] = useState(null);
            const [topPicks, setTopPicks] = useState([]);
            const [playbooks, setPlaybooks] = useState([]);
            const [selectedPlaybook, setSelectedPlaybook] = useState(null);
            const [filters, setFilters] = useState({
                sport: 'all',
                playerTier: 'all',
                budget: 'all',
                risk: 'all'
            });
            const [isLoading, setIsLoading] = useState(false);

            // Investment Playbooks
            const investmentPlaybooks = [
                {
                    id: 'flipping-hustler',
                    name: 'Flipping Hustler',
                    description: 'Quick flips for fast profits',
                    icon: '‚ö°',
                    strategy: 'Buy low, sell high within 30 days',
                    riskLevel: 'high',
                    expectedROI: '50-200%',
                    timeframe: '1-30 days',
                    targetCards: 'Rookie cards, hot prospects',
                    tips: [
                        'Focus on rookies with breakout potential',
                        'Monitor social media for hype spikes',
                        'Set strict stop-losses',
                        'Take profits quickly'
                    ]
                },
                {
                    id: 'collector-grail-hunt',
                    name: 'Collector Grail Hunt',
                    description: 'Long-term value appreciation',
                    icon: 'üèÜ',
                    strategy: 'Buy and hold generational talents',
                    riskLevel: 'low',
                    expectedROI: '200-1000%',
                    timeframe: '1-5 years',
                    targetCards: 'PSA 10s of superstars',
                    tips: [
                        'Focus on generational talents',
                        'Only buy PSA 10s',
                        'Hold for minimum 2 years',
                        'Diversify across sports'
                    ]
                },
                {
                    id: 'prospect-gambler',
                    name: 'Prospect Gambler',
                    description: 'High-risk, high-reward prospects',
                    icon: 'üé≤',
                    strategy: 'Bet on unproven talent',
                    riskLevel: 'high',
                    expectedROI: '100-5000%',
                    timeframe: '6 months - 3 years',
                    targetCards: 'Raw prospects, autos',
                    tips: [
                        'Research extensively',
                        'Only invest what you can lose',
                        'Diversify across many prospects',
                        'Be patient with development'
                    ]
                }
            ];

            useEffect(() => {
                // Check authentication
                if (!window.InfinityAuth.isUserAuthenticated()) {
                    window.location.href = 'login.html';
                    return;
                }

                // Load user data
                const userData = window.InfinityAuth.getUserData();
                setUser(userData);
                
                // Load investment data
                loadInvestmentData();
            }, []);

            const loadInvestmentData = async () => {
                setIsLoading(true);
                
                try {
                    // Load top picks
                    const picksData = await fetchTopPicks();
                    setTopPicks(picksData);
                    
                    // Set default playbook
                    setSelectedPlaybook(investmentPlaybooks[0]);
                } catch (error) {
                    console.error('Failed to load investment data:', error);
                } finally {
                    setIsLoading(false);
                }
            };

            const fetchTopPicks = async () => {
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve([
                {
                    id: 1,
                    rank: 1,
                                player: 'Luka Donƒçiƒá',
                    card: '2023 Panini Prizm Silver PSA 10',
                    currentPrice: 2400,
                    predictedPrice: 4800,
                    roi: 100,
                    timeframe: '48 hours',
                    risk: 'low',
                    confidence: 94,
                                reasoning: 'Tonight\'s game vs Lakers - Luka expected 35+ points',
                                action: 'BUY NOW',
                                urgency: 'high'
                },
                {
                    id: 2,
                    rank: 2,
                                player: 'Victor Wembanyama',
                                card: '2023 Panini Prizm Rookie PSA 10',
                                currentPrice: 5000,
                                predictedPrice: 10000,
                                roi: 100,
                                timeframe: '2 weeks',
                                risk: 'low',
                                confidence: 98,
                                reasoning: 'Generational talent, international demand surging',
                                action: 'BUY NOW',
                                urgency: 'high'
                            },
                            {
                                id: 3,
                                rank: 3,
                    player: 'Anthony Richardson',
                    card: '2023 Panini Prizm Base PSA 10',
                    currentPrice: 850,
                    predictedPrice: 1700,
                    roi: 100,
                    timeframe: '1 week',
                    risk: 'medium',
                    confidence: 89,
                                reasoning: 'NFL playoff performance, dual-threat QB hype',
                                action: 'BUY',
                                urgency: 'medium'
                            },
                            {
                                id: 4,
                                rank: 4,
                                player: 'Shohei Ohtani',
                                card: '2023 Topps Chrome Auto PSA 10',
                    currentPrice: 3200,
                    predictedPrice: 4800,
                    roi: 50,
                                timeframe: '1 month',
                                risk: 'medium',
                                confidence: 87,
                                reasoning: 'Japanese market demand, cultural crossover',
                                action: 'BUY',
                                urgency: 'medium'
                            },
                            {
                                id: 5,
                                rank: 5,
                    player: 'CJ Stroud',
                    card: '2023 Panini Prizm Base PSA 10',
                    currentPrice: 1200,
                    predictedPrice: 1800,
                    roi: 50,
                    timeframe: '2 weeks',
                    risk: 'low',
                    confidence: 85,
                                reasoning: 'Consistent performance, pocket passer stability',
                                action: 'BUY',
                                urgency: 'low'
                            }
                        ]);
                    }, 1000);
                });
            };

            const handleFilterChange = (filterType, value) => {
                setFilters(prev => ({
                    ...prev,
                    [filterType]: value
                }));
            };

            const handlePlaybookSelect = (playbook) => {
                setSelectedPlaybook(playbook);
            };

            const handleAction = (pick, action) => {
                // Simulate action
                console.log(`${action} ${pick.player} - ${pick.card}`);
                
                // Store interaction for AI learning
                if (window.InfinityAI) {
                    window.InfinityAI.storeInteraction('investment_action', {
                        pick: pick,
                        action: action,
                        userId: user.id
                    }, {
                        success: true,
                        timestamp: Date.now()
                    });
                }
            };

            const getRiskClass = (risk) => {
                switch(risk) {
                    case 'low': return 'risk-low';
                    case 'medium': return 'risk-medium';
                    case 'high': return 'risk-high';
                    default: return 'risk-medium';
                }
            };

            const getUrgencyClass = (urgency) => {
                switch(urgency) {
                    case 'high': return 'text-red-400';
                    case 'medium': return 'text-yellow-400';
                    case 'low': return 'text-green-400';
                    default: return 'text-gray-400';
                }
            };

            const filteredPicks = topPicks.filter(pick => {
                if (filters.sport !== 'all' && pick.sport !== filters.sport) return false;
                if (filters.playerTier !== 'all' && pick.tier !== filters.playerTier) return false;
                if (filters.budget !== 'all') {
                    const budget = parseInt(filters.budget);
                    if (pick.currentPrice > budget) return false;
                }
                if (filters.risk !== 'all' && pick.risk !== filters.risk) return false;
                return true;
            });

            if (!user) {
                return (
                    <div className="min-h-screen flex items-center justify-center">
                        <div className="text-center">
                            <div className="loading-spinner mx-auto mb-4"></div>
                            <div className="text-2xl font-bold infinity-text">Loading Compass...</div>
                            <div className="text-gray-400 mt-2">Preparing investment intelligence</div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="glass-morphism border-b border-cyan-400/20 sticky top-0 z-50">
                        <div className="container mx-auto px-6 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <button 
                                        onClick={() => window.location.href = 'dashboard-ultimate.html'}
                                        className="text-cyan-400 hover:text-white transition-colors"
                                    >
                                        ‚Üê Back to Dashboard
                                    </button>
                                    <h1 className="text-4xl font-bold infinity-text orbitron">
                                        üß≠ INVESTMENT COMPASS
                                    </h1>
                                </div>
                                <div className="text-cyan-400 font-bold text-lg">
                                    AI-Curated Top Picks
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="container mx-auto px-6 py-8">
                        <div className="space-y-8">
                            {/* Hero Section */}
                            <div className="text-center">
                                <h2 className="text-5xl font-bold infinity-text mb-4">üß≠ Investment Compass</h2>
                                <p className="text-gray-300 text-xl">AI-curated top 10 weekly moves with actionable insights</p>
                            </div>

                        {/* Filters */}
                            <div className="glass-morphism rounded-2xl p-6">
                                <h3 className="text-2xl font-bold text-cyan-400 mb-4">Filters</h3>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Sport</label>
                                        <select 
                                            value={filters.sport}
                                            onChange={(e) => handleFilterChange('sport', e.target.value)}
                                            className="w-full px-3 py-2 bg-black/30 border border-cyan-400/50 rounded-lg text-white focus:outline-none focus:border-cyan-400"
                                        >
                                            <option value="all">All Sports</option>
                                            <option value="nba">NBA</option>
                                            <option value="nfl">NFL</option>
                                            <option value="mlb">MLB</option>
                                            <option value="nhl">NHL</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Player Tier</label>
                                        <select 
                                            value={filters.playerTier}
                                            onChange={(e) => handleFilterChange('playerTier', e.target.value)}
                                            className="w-full px-3 py-2 bg-black/30 border border-cyan-400/50 rounded-lg text-white focus:outline-none focus:border-cyan-400"
                                        >
                                            <option value="all">All Tiers</option>
                                            <option value="rookie">Rookies</option>
                                            <option value="star">Stars</option>
                                            <option value="superstar">Superstars</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Budget</label>
                                        <select 
                                            value={filters.budget}
                                            onChange={(e) => handleFilterChange('budget', e.target.value)}
                                            className="w-full px-3 py-2 bg-black/30 border border-cyan-400/50 rounded-lg text-white focus:outline-none focus:border-cyan-400"
                                        >
                                            <option value="all">Any Budget</option>
                                            <option value="500">Under $500</option>
                                            <option value="1000">Under $1,000</option>
                                            <option value="2500">Under $2,500</option>
                                            <option value="5000">Under $5,000</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">Risk Level</label>
                                        <select 
                                            value={filters.risk}
                                            onChange={(e) => handleFilterChange('risk', e.target.value)}
                                            className="w-full px-3 py-2 bg-black/30 border border-cyan-400/50 rounded-lg text-white focus:outline-none focus:border-cyan-400"
                                        >
                                            <option value="all">All Risk Levels</option>
                                            <option value="low">Low Risk</option>
                                            <option value="medium">Medium Risk</option>
                                            <option value="high">High Risk</option>
                                        </select>
                                    </div>
                                </div>
                        </div>

                            {/* Top Picks */}
                                <div className="glass-morphism rounded-2xl p-6">
                                <h3 className="text-2xl font-bold text-cyan-400 mb-6">This Week's Top Picks</h3>
                                        <div className="space-y-4">
                                    {filteredPicks.map((pick) => (
                                        <div key={pick.id} className="cyber-card p-6 rounded-lg">
                                            <div className="flex justify-between items-start mb-4">
                                                        <div className="flex items-center gap-4">
                                                    <div className="text-3xl font-bold text-cyan-400">#{pick.rank}</div>
                                                            <div>
                                                        <div className="font-bold text-white text-lg">{pick.player}</div>
                                                        <div className="text-sm text-gray-400">{pick.card}</div>
                                                        <div className="text-sm text-gray-400 mt-1">{pick.reasoning}</div>
                                                            </div>
                                                        </div>
                                                        <div className="text-right">
                                                    <div className="text-green-400 font-bold text-lg">+{pick.roi}%</div>
                                                    <div className="text-cyan-400 font-bold">${pick.predictedPrice.toLocaleString()}</div>
                                                    <div className="text-xs text-gray-400">{pick.timeframe}</div>
                                                        </div>
                                                    </div>
                                                    
                                            <div className="flex justify-between items-center mb-4">
                                                <div className="flex items-center gap-4">
                                                    <div className="flex items-center">
                                                        <span className={`risk-indicator ${getRiskClass(pick.risk)}`}></span>
                                                        <span className="text-sm text-gray-300">{pick.risk.toUpperCase()} RISK</span>
                                                        </div>
                                                    <div className="text-sm text-gray-300">
                                                        Confidence: {pick.confidence}%
                                                    </div>
                                                    <div className={`text-sm font-bold ${getUrgencyClass(pick.urgency)}`}>
                                                        {pick.urgency.toUpperCase()} URGENCY
                                                    </div>
                                                </div>
                                                <div className="text-sm text-gray-400">
                                                    Current: ${pick.currentPrice.toLocaleString()}
                                                </div>
                                        </div>
                                            
                                            <div className="mb-4">
                                                <div className="confidence-bar" style={{width: `${pick.confidence}%`}}></div>
                                </div>

                                            <div className="flex justify-between items-center">
                                                <div className="text-sm text-gray-300">
                                                    Action: <span className="text-cyan-400 font-bold">{pick.action}</span>
                                                </div>
                                                <div className="flex gap-2">
                                                    <button 
                                                        onClick={() => handleAction(pick, 'BUY')}
                                                        className="quantum-btn px-4 py-2 rounded-lg text-sm"
                                                    >
                                                        Buy Now
                                                    </button>
                                                    <button 
                                                        onClick={() => handleAction(pick, 'WATCHLIST')}
                                                        className="px-4 py-2 border border-cyan-400 text-cyan-400 rounded-lg text-sm hover:bg-cyan-400/10 transition-colors"
                                                    >
                                                        Add to Watchlist
                                                    </button>
                                                </div>
                                            </div>
                                    </div>
                                    ))}
                                </div>
                            </div>

                            {/* Investment Playbooks */}
                                <div className="glass-morphism rounded-2xl p-6">
                                    <h3 className="text-2xl font-bold text-cyan-400 mb-6">Investment Playbooks</h3>
                                <div className="grid md:grid-cols-3 gap-6">
                                    {investmentPlaybooks.map((playbook) => (
                                            <div 
                                                key={playbook.id}
                                            onClick={() => handlePlaybookSelect(playbook)}
                                            className={`playbook-card p-6 rounded-lg cursor-pointer ${
                                                selectedPlaybook?.id === playbook.id ? 'selected' : ''
                                            }`}
                                        >
                                            <div className="text-center mb-4">
                                                <div className="text-4xl mb-2">{playbook.icon}</div>
                                                <div className="font-bold text-white text-lg">{playbook.name}</div>
                                                        <div className="text-sm text-gray-400">{playbook.description}</div>
                                                </div>
                                                
                                                <div className="space-y-2 text-sm">
                                                    <div className="flex justify-between">
                                                        <span className="text-gray-400">Strategy:</span>
                                                        <span className="text-white">{playbook.strategy}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span className="text-gray-400">Risk:</span>
                                                    <span className={`${getRiskClass(playbook.riskLevel)}`}>
                                                        {playbook.riskLevel.toUpperCase()}
                                                    </span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-gray-400">ROI:</span>
                                                    <span className="text-green-400 font-bold">{playbook.expectedROI}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span className="text-gray-400">Timeframe:</span>
                                                        <span className="text-cyan-400">{playbook.timeframe}</span>
                                                </div>
                                                </div>
                                            </div>
                                        ))}
                                </div>

                                {/* Selected Playbook Details */}
                                {selectedPlaybook && (
                                    <div className="mt-8 p-6 bg-black/30 rounded-lg">
                                        <h4 className="text-xl font-bold text-cyan-400 mb-4">
                                            {selectedPlaybook.name} - Detailed Strategy
                                        </h4>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div>
                                                <div className="text-sm text-gray-400 mb-2">Target Cards:</div>
                                                <div className="text-white mb-4">{selectedPlaybook.targetCards}</div>
                                                
                                                <div className="text-sm text-gray-400 mb-2">Key Tips:</div>
                                                <ul className="space-y-1">
                                                    {selectedPlaybook.tips.map((tip, index) => (
                                                        <li key={index} className="text-sm text-gray-300">
                                                            ‚Ä¢ {tip}
                                                        </li>
                                                    ))}
                                                </ul>
                                            </div>
                                            <div className="text-center">
                                                <div className="text-6xl mb-4">{selectedPlaybook.icon}</div>
                                                <div className="text-2xl font-bold text-cyan-400 mb-2">
                                                    {selectedPlaybook.expectedROI}
                                        </div>
                                                <div className="text-sm text-gray-400">Expected ROI</div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>

                    {/* Loading Overlay */}
                    {isLoading && (
                        <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50">
                            <div className="text-center">
                                <div className="loading-spinner mx-auto mb-4"></div>
                                <div className="text-2xl font-bold infinity-text">Loading Compass...</div>
                                <div className="text-gray-400 mt-2">Preparing investment intelligence</div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Render the application
        ReactDOM.render(<InvestmentCompass />, document.getElementById('root'));
    </script>
</body>
</html>