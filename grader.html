<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum AI Grader - Infinity</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            position: relative;
        }
        
        .glass-morphism {
            background: rgba(0, 212, 255, 0.08);
            backdrop-filter: blur(60px) saturate(400%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 25px 80px rgba(0, 0, 0, 0.95),
                0 0 40px rgba(0, 212, 255, 0.2),
                0 0 80px rgba(0, 212, 255, 0.05);
        }
        
        .cyber-card {
            background: rgba(0, 100, 255, 0.12);
            border: 1px solid rgba(0, 255, 255, 0.5);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px);
        }
        
        .cyber-card:hover {
            transform: none;
            background: rgba(0, 100, 255, 0.25);
            border-color: rgba(0, 255, 255, 0.9);
        }
        
        .quantum-btn {
            background: #00d4ff;
            border: none;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }
        
        .quantum-btn:hover {
            transform: none;
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.4);
            background: #00ff88;
        }
        
        
        .neon-cyan {
            box-shadow: 
                0 0 10px rgba(0, 212, 255, 0.6),
                0 0 20px rgba(0, 212, 255, 0.4),
                0 0 30px rgba(0, 212, 255, 0.2);
        }
        
        .upload-area {
            border: 2px dashed rgba(0, 212, 255, 0.5);
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: rgba(0, 212, 255, 0.9);
            background: rgba(0, 212, 255, 0.05);
        }
        
        .upload-area.dragover {
            border-color: rgba(0, 255, 136, 0.9);
            background: rgba(0, 255, 136, 0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;

        const QuantumGrader = () => {
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [analysisResult, setAnalysisResult] = useState(null);
            const [uploadedImage, setUploadedImage] = useState(null);
            const fileInputRef = useRef(null);

            const handleFileUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        setUploadedImage(e.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleDrop = (event) => {
                event.preventDefault();
                const file = event.dataTransfer.files[0];
                if (file && file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        setUploadedImage(e.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleDragOver = (event) => {
                event.preventDefault();
            };

            const analyzeCard = () => {
                setIsAnalyzing(true);
                
                // Simulate AI analysis
                setTimeout(() => {
                    const mockResult = {
                        predicted_grade: "PSA 9",
                        confidence: 0.92,
                        subgrades: {
                            centering: 0.88,
                            corners: 0.85,
                            edges: 0.91,
                            surface: 0.78
                        },
                        all_predictions: [
                            { company: 'PSA', grade: 'PSA 9', confidence: 0.92 },
                            { company: 'BGS', grade: 'BGS 9.5', confidence: 0.89 },
                            { company: 'SGC', grade: 'SGC 9', confidence: 0.91 },
                            { company: 'TAG', grade: 'TAG 9', confidence: 0.94 }
                        ],
                        recommendation: "Submit to PSA; expected uplift to PSA 10 is 18% if recentered + press.",
                        evidence: [
                            { type: "surface_analysis", finding: "Minor surface wear detected", confidence: 0.88, location: "Top-right corner" },
                            { type: "centering_analysis", finding: "Slight left bias detected", confidence: 0.92, measurement: "55/45 centering" },
                            { type: "corner_analysis", finding: "Sharp corners with minor wear", confidence: 0.85, condition: "Good" },
                            { type: "edge_analysis", finding: "Clean edges with minimal wear", confidence: 0.91, condition: "Excellent" }
                        ],
                        cost_analysis: {
                            grading_fee: 50,
                            expected_value: 2500,
                            roi: 0.18,
                            timeline: "2-4 weeks"
                        }
                    };
                    
                    setAnalysisResult(mockResult);
                    setIsAnalyzing(false);
                }, 3000);
            };

            const goHome = () => {
                window.location.href = 'home.html';
            };

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="glass-morphism border-b border-cyan-400/20 sticky top-0 z-50">
                        <div className="container mx-auto px-6 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <button onClick={goHome} className="text-cyan-400 hover:text-white transition-colors">
                                        ‚Üê Back to Home
                                    </button>
                                    <h1 className="text-3xl font-bold text-cyan-400">üî¨ Quantum AI Grader</h1>
                                </div>
                                <div className="text-sm text-gray-400">
                                    Upload card image for instant grade prediction
                                </div>
                            </div>
                        </div>
                    </header>

                    <main className="container mx-auto px-6 py-8">
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            {/* Upload Section */}
                            <div className="space-y-6">
                                <div className="glass-morphism p-6 rounded-lg">
                                    <h2 className="text-2xl font-bold text-cyan-400 mb-4">Upload Card Image</h2>
                                    
                                    <div
                                        className="upload-area p-8 rounded-lg text-center cursor-pointer"
                                        onDrop={handleDrop}
                                        onDragOver={handleDragOver}
                                        onClick={() => fileInputRef.current?.click()}
                                    >
                                        {uploadedImage ? (
                                            <div>
                                                <img src={uploadedImage} alt="Uploaded card" className="max-w-full h-64 object-contain mx-auto rounded-lg mb-4" />
                                                <p className="text-green-400">Image uploaded successfully!</p>
                                            </div>
                                        ) : (
                                            <div>
                                                <div className="text-6xl mb-4">üì∏</div>
                                                <p className="text-lg text-gray-300 mb-2">Drop your card image here</p>
                                                <p className="text-sm text-gray-400">or click to browse</p>
                                            </div>
                                        )}
                                    </div>
                                    
                                    <input
                                        ref={fileInputRef}
                                        type="file"
                                        accept="image/*"
                                        onChange={handleFileUpload}
                                        className="hidden"
                                    />
                                    
                                    <div className="mt-4">
                                        <button
                                            onClick={analyzeCard}
                                            disabled={!uploadedImage || isAnalyzing}
                                            className="quantum-btn w-full py-3 px-6 rounded-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed"
                                        >
                                            {isAnalyzing ? 'üî¨ Analyzing...' : 'üöÄ Analyze Card'}
                                        </button>
                                    </div>
                                </div>

                                {/* Grade Simulation */}
                                <div className="glass-morphism p-6 rounded-lg">
                                    <h3 className="text-xl font-bold text-cyan-400 mb-4">Grade Simulation</h3>
                                    <div className="space-y-4">
                                        <div className="cyber-card p-4 rounded-lg">
                                            <h4 className="font-bold text-white mb-2">PSA Simulation</h4>
                                            <p className="text-sm text-gray-400">Simulate different PSA grades and their impact on value</p>
                                            <button className="quantum-btn mt-2 px-4 py-2 rounded text-sm">
                                                Run Simulation
                                            </button>
                                        </div>
                                        <div className="cyber-card p-4 rounded-lg">
                                            <h4 className="font-bold text-white mb-2">BGS Simulation</h4>
                                            <p className="text-sm text-gray-400">Compare BGS subgrades and overall grades</p>
                                            <button className="quantum-btn mt-2 px-4 py-2 rounded text-sm">
                                                Run Simulation
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Results Section */}
                            <div className="space-y-6">
                                {analysisResult ? (
                                    <div className="glass-morphism p-6 rounded-lg neon-cyan">
                                        <h2 className="text-2xl font-bold text-cyan-400 mb-4">Analysis Results</h2>
                                        
                                        {/* Predicted Grade */}
                                        <div className="cyber-card p-4 rounded-lg mb-4">
                                            <h3 className="text-xl font-bold text-white mb-2">Predicted Grade</h3>
                                            <div className="text-4xl font-bold text-green-400 mb-2">
                                                {analysisResult.predicted_grade}
                                            </div>
                                            <div className="text-sm text-gray-400">
                                                Confidence: {Math.round(analysisResult.confidence * 100)}%
                                            </div>
                                        </div>

                                        {/* Subgrades */}
                                        <div className="cyber-card p-4 rounded-lg mb-4">
                                            <h3 className="text-lg font-bold text-white mb-3">Subgrade Breakdown</h3>
                                            <div className="grid grid-cols-2 gap-4">
                                                {Object.entries(analysisResult.subgrades).map(([key, value]) => (
                                                    <div key={key} className="text-center">
                                                        <div className="text-sm text-gray-400 capitalize mb-1">
                                                            {key.replace('_', ' ')}
                                                        </div>
                                                        <div className="text-2xl font-bold text-cyan-400">
                                                            {Math.round(value * 100)}%
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        {/* All Predictions */}
                                        <div className="cyber-card p-4 rounded-lg mb-4">
                                            <h3 className="text-lg font-bold text-white mb-3">All Company Predictions</h3>
                                            <div className="space-y-2">
                                                {analysisResult.all_predictions.map((pred, idx) => (
                                                    <div key={idx} className="flex justify-between items-center">
                                                        <span className="text-white">{pred.company}</span>
                                                        <span className="text-cyan-400 font-bold">{pred.grade}</span>
                                                        <span className="text-green-400 text-sm">
                                                            {Math.round(pred.confidence * 100)}%
                                                        </span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        {/* Evidence */}
                                        <div className="cyber-card p-4 rounded-lg mb-4">
                                            <h3 className="text-lg font-bold text-white mb-3">Analysis Evidence</h3>
                                            <div className="space-y-2">
                                                {analysisResult.evidence.map((evidence, idx) => (
                                                    <div key={idx} className="text-sm">
                                                        <span className="text-cyan-400 font-bold capitalize">
                                                            {evidence.type.replace('_', ' ')}:
                                                        </span>
                                                        <span className="text-gray-300 ml-2">{evidence.finding}</span>
                                                        <span className="text-green-400 ml-2">
                                                            ({Math.round(evidence.confidence * 100)}%)
                                                        </span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        {/* Cost Analysis */}
                                        <div className="cyber-card p-4 rounded-lg">
                                            <h3 className="text-lg font-bold text-white mb-3">Cost Analysis</h3>
                                            <div className="space-y-2 text-sm">
                                                <div className="flex justify-between">
                                                    <span className="text-gray-400">Grading Fee:</span>
                                                    <span className="text-white">${analysisResult.cost_analysis.grading_fee}</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-gray-400">Expected Value:</span>
                                                    <span className="text-green-400">${analysisResult.cost_analysis.expected_value}</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-gray-400">ROI:</span>
                                                    <span className="text-green-400">+{Math.round(analysisResult.cost_analysis.roi * 100)}%</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-gray-400">Timeline:</span>
                                                    <span className="text-cyan-400">{analysisResult.cost_analysis.timeline}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="glass-morphism p-6 rounded-lg text-center">
                                        <div className="text-6xl mb-4">üî¨</div>
                                        <h3 className="text-xl font-bold text-cyan-400 mb-2">Ready to Analyze</h3>
                                        <p className="text-gray-400">
                                            Upload a card image to get instant grade predictions from all major grading companies.
                                        </p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        ReactDOM.render(<QuantumGrader />, document.getElementById('root'));
    </script>
</body>
</html>